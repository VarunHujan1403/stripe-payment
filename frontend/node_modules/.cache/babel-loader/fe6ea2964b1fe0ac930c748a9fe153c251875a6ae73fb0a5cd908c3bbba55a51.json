{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import StripeCheckout from'react-stripe-checkout';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PaymentPage=_ref=>{let{onTransactionSubmit}=_ref;const[name,setName]=useState('');const[amount,setAmount]=useState('');useEffect(()=>{createBlinkingLights();},[]);const handleSubmit=async e=>{e.preventDefault();const randomString=generateRandomString();onTransactionSubmit(name,amount,randomString);setName('');setAmount('');};const handleToken=async token=>{try{const response=await axios.post('http://localhost:5000/api/transactions',{name,amount,transactionID:token.id});console.log(response.data.message);}catch(error){console.error('Error:',error.response.data.error);}};const generateRandomString=()=>{const characters='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;:,.<>?';let result='';const charactersLength=characters.length;for(let i=0;i<32;i++){result+=characters.charAt(Math.floor(Math.random()*charactersLength));}return result;};const createBlinkingLights=()=>{const lightsContainer=document.createElement('div');lightsContainer.classList.add('blinking-lights');const paymentForm=document.querySelector('.payment-form');paymentForm.appendChild(lightsContainer);};return/*#__PURE__*/_jsxs(\"div\",{className:\"payment-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Make a Payment\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-form\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Amount ($)\",value:amount,onChange:e=>setAmount(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"pay-btn1\",children:\"Click here to save transaction\"})]}),/*#__PURE__*/_jsxs(StripeCheckout,{token:handleToken,stripeKey:\"pk_test_51PHSs2SCYZ0If31BnY1wMhBKNOBfSLMgV6oTOX5f8WAhEgc6wanPznDLF7MgrnSntkXW37nUCjUfn3TVV2e2s2kN00bbOsLmC7\",amount:Number(amount)*100,currency:\"USD\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{className:\"pay-btn\",children:\"Press here to Pay Now\"}),\" \"]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Scroll Down for Transaction History \\u2193\"})]})]});};export default PaymentPage;","map":{"version":3,"names":["React","useState","useEffect","axios","StripeCheckout","jsx","_jsx","jsxs","_jsxs","PaymentPage","_ref","onTransactionSubmit","name","setName","amount","setAmount","createBlinkingLights","handleSubmit","e","preventDefault","randomString","generateRandomString","handleToken","token","response","post","transactionID","id","console","log","data","message","error","characters","result","charactersLength","length","i","charAt","Math","floor","random","lightsContainer","document","createElement","classList","add","paymentForm","querySelector","appendChild","className","children","onSubmit","type","placeholder","value","onChange","target","stripeKey","Number","currency"],"sources":["C:/Users/VARUN ANSS/OneDrive/Desktop/Swio/frontend/src/PaymentPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport StripeCheckout from 'react-stripe-checkout';\r\nimport './App.css';\r\n\r\nconst PaymentPage = ({ onTransactionSubmit }) => {\r\n  const [name, setName] = useState('');\r\n  const [amount, setAmount] = useState('');\r\n\r\n  useEffect(() => {\r\n    createBlinkingLights();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const randomString = generateRandomString();\r\n    onTransactionSubmit(name, amount, randomString);\r\n    setName('');\r\n    setAmount('');\r\n  };\r\n\r\n  const handleToken = async (token) => {\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/transactions', {\r\n        name,\r\n        amount,\r\n        transactionID: token.id\r\n      });\r\n      console.log(response.data.message);\r\n    } catch (error) {\r\n      console.error('Error:', error.response.data.error);\r\n    }\r\n  };\r\n\r\n  const generateRandomString = () => {\r\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;:,.<>?';\r\n    let result = '';\r\n    const charactersLength = characters.length;\r\n    for (let i = 0; i < 32; i++) {\r\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n    }\r\n    return result;\r\n  };\r\n\r\n  const createBlinkingLights = () => {\r\n    const lightsContainer = document.createElement('div');\r\n    lightsContainer.classList.add('blinking-lights');\r\n\r\n    const paymentForm = document.querySelector('.payment-form');\r\n    paymentForm.appendChild(lightsContainer);\r\n  };\r\n\r\n  return (\r\n    <div className=\"payment-page\">\r\n      <h1>Make a Payment</h1>\r\n      <div className=\"payment-form\">\r\n        <form onSubmit={handleSubmit}>\r\n          <input type=\"text\" placeholder=\"Name\" value={name} onChange={(e) => setName(e.target.value)} />\r\n          <input type=\"number\" placeholder=\"Amount ($)\" value={amount} onChange={(e) => setAmount(e.target.value)} /><br></br>\r\n          <button type=\"submit\" className='pay-btn1'>Click here to save transaction</button>\r\n        </form>\r\n        <StripeCheckout token={handleToken} stripeKey=\"pk_test_51PHSs2SCYZ0If31BnY1wMhBKNOBfSLMgV6oTOX5f8WAhEgc6wanPznDLF7MgrnSntkXW37nUCjUfn3TVV2e2s2kN00bbOsLmC7\" amount={Number(amount) * 100} currency=\"USD\" > <button className=\"pay-btn\">Press here to Pay Now</button> </StripeCheckout>\r\n        <h1>Scroll Down for Transaction History &darr;</h1>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}